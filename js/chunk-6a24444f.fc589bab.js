(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a24444f"],{"42a3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mt-4"},t._l(t.products,function(e){return a("div",{key:e.id,staticClass:"col-md-4 mb-4"},[a("div",{staticClass:"card border-0 shadow-sm"},[a("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+e.imageUrl+")"}}),a("div",{staticClass:"card-body"},[a("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(e.category))]),a("h5",{staticClass:"card-title"},[a("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(e.title))])]),a("p",{staticClass:"card-text"},[t._v(t._s(e.content))]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[e.price?t._e():a("del",{staticClass:"h5"},[t._v("原價 "+t._s(e.origin_price)+" 元")]),e.origin_price?a("del",{staticClass:"h6"},[t._v("原價 "+t._s(e.origin_price)+" 元")]):t._e(),e.origin_price?a("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(e.price)+" 元")]):a("div",{staticClass:"h5"},[t._v(t._s(e.price)+" 元")])])]),a("div",{staticClass:"card-footer d-flex"},[a("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),t.getProduct(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            查看更多\n          ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),t.addToCart(e.id)}}},[t.status.loadingItem===e.id?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            加到購物車\n          ")])])])])}),0),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._m(0)]),a("div",{staticClass:"modal-body"},[a("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),a("blockquote",{staticClass:"blockquote mt-3"},[a("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),a("footer",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.product.description))])]),a("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.price?t._e():a("div",{staticClass:"h4"},[t._v(t._s(t.product.origin_price)+" 元")]),t.product.price?a("del",{staticClass:"h6"},[t._v("原價 "+t._s(t.product.origin_price)+" 元")]):t._e(),t.product.price?a("div",{staticClass:"h4"},[t._v("現在只要 "+t._s(t.product.price)+" 元")]):t._e()]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.product,"num",e.target.multiple?a:a[0])}}},t._l(10,function(e){return a("option",{key:e,domProps:{value:e}},[t._v("\n              選購 "+t._s(e)+" "+t._s(t.product.unit)+"\n            ")])}),0)]),a("div",{staticClass:"modal-footer"},[a("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\n            小計 "),a("strong",[t._v(t._s(t.product.num*t.product.price))]),t._v(" 元\n          ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.addToCart(t.product.id,t.product.num)}}},[t.product.id===t.status.loadingItem?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            加到購物車\n          ")])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col d-flex justify-content-center"},[a("pagination-component")],1)]),a("div",{staticClass:"my-5 row justify-content-center"},[a("div",{staticClass:"my-5 row justify-content-center"},[a("table",{staticClass:"table"},[t._m(1),a("tbody",t._l(t.cart.carts,function(e){return a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){a.preventDefault(),t.removeCart(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])]),a("td",{staticClass:"align-middle"},[t._v("\n              "+t._s(e.product.title)+"\n              "),e.coupon?a("div",{staticClass:"text-success"},[t._v("\n                已套用優惠券\n              ")]):t._e()]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))]),a("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("toFixed")(e.final_total)))])])}),0),a("tfoot",[a("tr",[a("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.cart.total))])]),t.cart.final_total!==t.cart.total?a("tr",[a("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),a("td",{staticClass:"text-right text-success"},[t._v(t._s(t._f("toFixed")(t.cart.final_total)))])]):t._e()])]),a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:t.updateCouponCode}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.applyCouponCode}},[t._v("\n            套用優惠碼\n          ")])])])])]),a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"col-md-6",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),a("span",{staticClass:"text-danger"},[t._v("\n          "+t._s(t.errors.first("email"))+"\n        ")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("請輸入姓名")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^09\d{8}$/},expression:"{ required: true, regex: /^09\\d{8}$/ }"},{name:"model",rawName:"v-model",value:t.tel,expression:"tel"}],staticClass:"form-control",attrs:{type:"tel",name:"usertel",id:"usertel",placeholder:"0975655123"},domProps:{value:t.tel},on:{input:function(e){e.target.composing||(t.tel=e.target.value)}}}),t.errors.has("usertel")?a("span",{staticClass:"text-danger"},[t._v("此欄位不得留空或格式錯誤")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",attrs:{type:"address",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"form-control",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger",on:{click:function(e){return e.preventDefault(),t.createOrder(e)}}},[t._v("送出訂單")])])])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("th"),a("th",[t._v("品名")]),a("th",[t._v("數量")]),a("th",[t._v("單價")])])}],o=(a("7f7f"),a("be94")),i=a("2f62"),n=a("8b95"),l={components:{"pagination-component":n["a"]},computed:Object(o["a"])({},Object(i["b"])("productsModule",["products","product"]),Object(i["b"])("cartsModule",["cart"]),Object(i["b"])(["status"]),Object(i["c"])("couponsModule",["coupon_code"]),{email:{get:function(){return this.$store.state.ordersModule.form.user.email},set:function(t){this.$store.commit("ordersModule/FORM_USER_EMAIL",t)}},name:{get:function(){return this.$store.state.ordersModule.form.user.name},set:function(t){this.$store.commit("ordersModule/FORM_USER_NAME",t)}},tel:{get:function(){return this.$store.state.ordersModule.form.user.tel},set:function(t){this.$store.commit("ordersModule/FORM_USER_TEL",t)}},address:{get:function(){return this.$store.state.ordersModule.form.user.address},set:function(t){this.$store.commit("ordersModule/FORM_USER_ADDRESS",t)}},message:{get:function(){return this.$store.state.ordersModule.form.message},set:function(t){this.$store.commit("ordersModule/FORM_MESSAGE",t)}}}),methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$store.dispatch("productsModule/getProducts",t)},getProduct:function(t){this.$store.dispatch("productsModule/getProduct",t)},addToCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.dispatch("cartsModule/addToCart",{id:t,qty:e})},removeCart:function(t){this.$store.dispatch("cartsModule/removeCart",t)},getCart:function(){this.$store.dispatch("cartsModule/getCart")},applyCouponCode:function(){this.$store.dispatch("couponsModule/applyCouponCode")},createOrder:function(){var t=this;this.$validator.validate().then(function(e){e&&t.$store.dispatch("ordersModule/createOrder")})},updateCouponCode:function(t){this.$store.commit("couponsModule/COUPON_CODE",t.target.value)}},filters:{toFixed:function(t){return t.toFixed(0)}},created:function(){var t=this;t.getProducts(),t.getCart()}},c=l,d=a("2877"),u=Object(d["a"])(c,s,r,!1,null,null,null);u.options.__file="CustomOrders.vue";e["default"]=u.exports},"7f7f":function(t,e,a){var s=a("86cc").f,r=Function.prototype,o=/^\s*function ([^ (]*)/,i="name";i in r||a("9e1e")&&s(r,i,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"8b95":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:!1===t.pagination.has_pre},on:{click:function(e){e.preventDefault(),t.getCurrentPage(t.pagination.current_page-1)}}},[t._m(0)]),t._l(t.pagination.total_pages,function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.pagination.current_page===e}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.getCurrentPage(e)}}},[t._v(t._s(e))])])}),a("li",{staticClass:"page-item",class:{disabled:!1===t.pagination.has_next},on:{click:function(e){e.preventDefault(),t.getCurrentPage(t.pagination.current_page+1)}}},[t._m(1)])],2)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),a("span",{staticClass:"sr-only"},[t._v("Previous")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),a("span",{staticClass:"sr-only"},[t._v("Next")])])}],o={computed:{pagination:function(){var t=this.$route.path;return"/admin/orders"===t?t="ordersModule":"/admin/products"===t||"/custom-orders"===t?t="productsModule":"/admin/coupons"===t&&(t="couponsModule"),this.$store.state[t].pagination}},methods:{getCurrentPage:function(t){var e=this.$route.path,a="";"/admin/orders"===e?(e="ordersModule",a="getOrders"):"/admin/products"===e||"/custom-orders"===e?(e="productsModule",a="getProducts"):"/admin/coupons"===e&&(e="couponsModule",a="getCoupons"),this.$store.dispatch("".concat(e,"/").concat(a),t),window.scrollTo(0,0)}}},i=o,n=a("2877"),l=Object(n["a"])(i,s,r,!1,null,null,null);l.options.__file="Pagination.vue";e["a"]=l.exports},be94:function(t,e,a){"use strict";function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),r.forEach(function(e){s(t,e,a[e])})}return t}a.d(e,"a",function(){return r})}}]);
//# sourceMappingURL=chunk-6a24444f.fc589bab.js.map